SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 5);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = N'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 5);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 5, OVERLAP = 50);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 5, OVERLAP = NULL, ENABLE_CHUNK_SET_ID = 50);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 5, OVERLAP = 10, ENABLE_CHUNK_SET_ID = 1);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = @SOURCE, CHUNK_TYPE = fixed, CHUNK_SIZE = @CHUNK_SIZE);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = @SOURCE, CHUNK_TYPE = fixed, CHUNK_SIZE = @CHUNK_SIZE, OVERLAP = @OVERLAP, ENABLE_CHUNK_SET_ID = @ENABLE_CHUNK_SET_ID);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = NULL, CHUNK_TYPE = fixed, CHUNK_SIZE = 5);

SELECT *
FROM t1 CROSS APPLY AI_GENERATE_CHUNKS (SOURCE = t1.c1, CHUNK_TYPE = fixed, CHUNK_SIZE = 10);

SELECT *
FROM t1 CROSS APPLY AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = t1.c1);

SELECT *
FROM t1 CROSS APPLY AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 10, OVERLAP = t1.c1);

SELECT *
FROM t1 CROSS APPLY AI_GENERATE_CHUNKS (SOURCE = 'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 10, OVERLAP = 5, ENABLE_CHUNK_SET_ID = t1.c1);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = N'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = NULL);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = N'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 10, OVERLAP = NULL);

SELECT *
FROM AI_GENERATE_CHUNKS (SOURCE = N'some text', CHUNK_TYPE = fixed, CHUNK_SIZE = 10, OVERLAP = 5, ENABLE_CHUNK_SET_ID = NULL);

CREATE TABLE t2 (
    Id   INT            IDENTITY PRIMARY KEY,
    Text NVARCHAR (MAX)
);
GO

INSERT INTO t2 (Text)
VALUES        (N'This is the first text.'),
(N'Second sample text.'),
(N'Third example text.');
GO

CREATE VIEW v_GeneratedChunksFromTable
AS
SELECT t2.Id,
       chunks.*
FROM t2 CROSS APPLY AI_GENERATE_CHUNKS (SOURCE = t2.Text, CHUNK_TYPE = fixed, CHUNK_SIZE = 5) AS chunks;
GO

CREATE PROCEDURE usp_GenerateChunks
AS
BEGIN
    SELECT *
    FROM AI_GENERATE_CHUNKS (SOURCE = N'This is some sample text that will be chunked.', CHUNK_TYPE = fixed, CHUNK_SIZE = 5, OVERLAP = 2);
END
GO

CREATE FUNCTION dbo.AI_GENERATE_CHUNKS
(@input NVARCHAR (MAX))
RETURNS NVARCHAR (MAX)
AS
BEGIN
    RETURN CONCAT('Chunked: ', @input);
END
GO

CREATE TABLE dbo.AI_GENERATE_CHUNKS (
    id   INT            PRIMARY KEY,
    data NVARCHAR (MAX)
);

SELECT SOURCE
FROM userTable CROSS APPLY dbo.AI_GENERATE_CHUNKS(target);

SELECT SOURCE
FROM userTable CROSS APPLY dbo.[AI_GENERATE_CHUNKS](SOURCE);


SELECT SOURCE
FROM userTable CROSS APPLY dbo.AI_GENERATE_CHUNKS([SOURCE]);

SELECT SOURCE
FROM userTable CROSS APPLY dbo.[AI_GENERATE_CHUNKS]([SOURCE]);

SELECT *
FROM dbo.AI_GENERATE_CHUNKS(3);